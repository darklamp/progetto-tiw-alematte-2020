<html>
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.5.0.min.js" data-th-src="@{https://code.jquery.com/jquery-3.5.0.min.js}"></script>
    <link id="mainCssLink" rel="stylesheet" type="text/css" href="../css/style.css" data-th-href="@{/css/style.css}"/>
    <script data-th-src="@{/js/style.js}" src="../js/style.js" crossorigin="anonymous"></script>
    <title>Register</title>
    <script type="text/javascript">
        function workerShow(userType)
        {
            console.log(userType);
            if (userType) {
                if ("worker" === userType.value) {
                    document.getElementById("workerUpload").style.display = "block";
                } else {
                    document.getElementById("workerUpload").style.display = "none";
                }
            } else {
                document.getElementById("workerUpload").style.display = "none";
            }
        }
    </script>
</head>
<body>
<div class="register-form-container">
    <h2>Create a new account</h2>
    <div class="alert alert-danger" data-th-class="${'alert alert-' + errorMessage.getType()}" data-th-if="${errorMessage.isVisible()}" data-th-utext="${errorMessage.getContent()}">Invalid login</div>
    <form class="form register-form" method="POST" action="register.html" data-th-action="@{/register}" enctype="multipart/form-data">
        <div class="form-group">
            <div class="row">
                <div class="col-6">
                    <label>Username</label>
                    <input class="form-control" type="text" name="username" placeholder="Username"/>
                </div>
                <div class="col-6">
                    <label>Role</label>
                    <select class="form-control" name="role" onchange="workerShow(this);">
                        <option value="worker">Worker</option>
                        <option value="manager">Manager</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="row">
                <div class="col-12">
                    <label>E-Mail</label>
                    <input type="email" class="form-control" name="email" placeholder="E-Mail"/>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <label>Password</label>
                    <input type="password" class="form-control" name="password" placeholder="Password"/>
                </div>
                <div class="col-6">
                    <label>Confirm password</label>
                    <input type="password" class="form-control" name="password_cnf" placeholder="Confirm password"/>
                </div>
            </div>
        </div>
        <div class="form-group" id="workerUpload">
            <div class="row">
                <div class="col-6">
                    <label>Photo</label>
                    <input type="file" name="photo" class="form-control"/>
                </div>
                <div class="col-6">
                    <label>Experience</label>
                    <select class="form-control" name="experience">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
            </div>
        </div>
        <input type="submit" id="submitButton" class="btn btn-primary btn-register" value="Register" />

    </form>
    <a href="login.html" data-th-href="@{/login}" class="register-link">Login here</a>
    <br/>
    <a href="../index.html" class="register-link">Back</a>

</div>
<script type="text/javascript">
    document.getElementById("submitButton").addEventListener("click", (e) => {
        if (document.getElementsByName("password")[0].value !== document.getElementsByName("password_cnf")[0].value) {
            e.preventDefault();
            window.alert("Passwords do not match.");
        }
    });
</script>
</body>
</html>
